###########################################
#Makefile for simple programs
###########################################
INC=
#LIB= -lpthread
LOCAL_CFLAGS += -pie -fPIE
LOCAL_LDFLAGS += -pie -fPIE

CC=aarch64-linux-android-gcc
CC_FLAG=-Wall
LOCAL_STATIC_LIBRARIES += libc

PRG=exploit_test

OBJ += kallsyms.o \
       pty.o \
       syscall.o \
       rop_ioctl.o \
       commit_cred.o \
       main.o

$(PRG):$(OBJ)
	$(CC) $(INC) $(LIB) -o $@ $(OBJ) $(LOCAL_CFLAGS)

.SUFFIXES: .c .o .cpp
.cpp.o:
	$(CC) $(CC_FLAG) $(INC) -c $*.cpp -l($LOCAL_STATIC_LIBRARIES) -o $*.o

.PRONY:clean
clean:
	@echo "clean object"
	rm -f $(OBJ) $(PRG)
